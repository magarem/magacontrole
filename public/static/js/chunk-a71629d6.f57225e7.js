(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a71629d6"],{"333d":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pagination-container",class:{hidden:t.hidden}},[a("el-pagination",t._b({attrs:{background:t.background,"current-page":t.currentPage,"page-size":t.pageSize,layout:t.layout,"page-sizes":t.pageSizes,total:t.total},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},"el-pagination",t.$attrs,!1))],1)},o=[];a("c5f6");Math.easeInOutQuad=function(t,e,a,i){return t/=i/2,t<1?a/2*t*t+e:(t--,-a/2*(t*(t-2)-1)+e)};var n=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();function s(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}function r(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function l(t,e,a){var i=r(),o=t-i,l=20,c=0;e="undefined"===typeof e?500:e;var d=function t(){c+=l;var r=Math.easeInOutQuad(c,i,o,e);s(r),c<e?n(t):a&&"function"===typeof a&&a()};d()}var c={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(t){this.$emit("update:page",t)}},pageSize:{get:function(){return this.limit},set:function(t){this.$emit("update:limit",t)}}},methods:{handleSizeChange:function(t){this.$emit("pagination",{page:this.currentPage,limit:t}),this.autoScroll&&l(0,800)},handleCurrentChange:function(t){this.$emit("pagination",{page:t,limit:this.pageSize}),this.autoScroll&&l(0,800)}}},d=c,u=(a("e498"),a("2877")),p=Object(u["a"])(d,i,o,!1,null,"6af373ef",null);e["a"]=p.exports},6724:function(t,e,a){"use strict";a("8d41");var i="@@wavesContext";function o(t,e){function a(a){var i=Object.assign({},e.value),o=Object.assign({ele:t,type:"hit",color:"rgba(0, 0, 0, 0.15)"},i),n=o.ele;if(n){n.style.position="relative",n.style.overflow="hidden";var s=n.getBoundingClientRect(),r=n.querySelector(".waves-ripple");switch(r?r.className="waves-ripple":(r=document.createElement("span"),r.className="waves-ripple",r.style.height=r.style.width=Math.max(s.width,s.height)+"px",n.appendChild(r)),o.type){case"center":r.style.top=s.height/2-r.offsetHeight/2+"px",r.style.left=s.width/2-r.offsetWidth/2+"px";break;default:r.style.top=(a.pageY-s.top-r.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",r.style.left=(a.pageX-s.left-r.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return r.style.backgroundColor=o.color,r.className="waves-ripple z-active",!1}}return t[i]?t[i].removeHandle=a:t[i]={removeHandle:a},a}var n={bind:function(t,e){t.addEventListener("click",o(t,e),!1)},update:function(t,e){t.removeEventListener("click",t[i].removeHandle,!1),t.addEventListener("click",o(t,e),!1)},unbind:function(t){t.removeEventListener("click",t[i].removeHandle,!1),t[i]=null,delete t[i]}},s=function(t){t.directive("waves",n)};window.Vue&&(window.waves=n,Vue.use(s)),n.install=s;e["a"]=n},"6c29":function(t,e,a){},"716b":function(t,e,a){(function(e,a){t.exports=a()})(0,function(){return function(t){function e(i){if(a[i])return a[i].exports;var o=a[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var a={};return e.m=t,e.c=a,e.i=function(t){return t},e.d=function(t,a,i){e.o(t,a)||Object.defineProperty(t,a,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p=".",e(e.s=9)}([function(t,e,a){"use strict";e.a={prefix:"",suffix:"",thousands:",",decimal:".",precision:2}},function(t,e,a){"use strict";var i=a(2),o=a(5),n=a(0);e.a=function(t,e){if(e.value){var s=a.i(o.a)(n.a,e.value);if("INPUT"!==t.tagName.toLocaleUpperCase()){var r=t.getElementsByTagName("input");1!==r.length||(t=r[0])}t.oninput=function(){var e=t.value.length-t.selectionEnd;t.value=a.i(i.a)(t.value,s),e=Math.max(e,s.suffix.length),e=t.value.length-e,e=Math.max(e,s.prefix.length+1),a.i(i.b)(t,e),t.dispatchEvent(a.i(i.c)("change"))},t.onfocus=function(){a.i(i.b)(t,t.value.length-s.suffix.length)},t.oninput(),t.dispatchEvent(a.i(i.c)("input"))}}},function(t,e,a){"use strict";function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.a;"number"==typeof t&&(t=t.toFixed(s(e.precision)));var a=t.indexOf("-")>=0?"-":"",i=n(t),o=l(i,e.precision),r=u(o).split("."),p=r[0],m=r[1];return p=c(p,e.thousands),e.prefix+a+d(p,m,e.decimal)+e.suffix}function o(t,e){var a=t.indexOf("-")>=0?-1:1,i=n(t),o=l(i,e);return parseFloat(o)*a}function n(t){return u(t).replace(/\D+/g,"")||"0"}function s(t){return r(0,t,20)}function r(t,e,a){return Math.max(t,Math.min(e,a))}function l(t,e){var a=Math.pow(10,e);return(parseFloat(t)/a).toFixed(s(e))}function c(t,e){return t.replace(/(\d)(?=(?:\d{3})+\b)/gm,"$1"+e)}function d(t,e,a){return e?t+a+e:t}function u(t){return t?t.toString():""}function p(t,e){var a=function(){t.setSelectionRange(e,e)};t===document.activeElement&&(a(),setTimeout(a,1))}function m(t){var e=document.createEvent("Event");return e.initEvent(t,!0,!0),e}var f=a(0);a.d(e,"a",function(){return i}),a.d(e,"d",function(){return o}),a.d(e,"b",function(){return p}),a.d(e,"c",function(){return m})},function(t,e,a){"use strict";function i(t,e){e&&Object.keys(e).map(function(t){r.a[t]=e[t]}),t.directive("money",s.a),t.component("money",n.a)}Object.defineProperty(e,"__esModule",{value:!0});var o=a(6),n=a.n(o),s=a(1),r=a(0);a.d(e,"Money",function(){return n.a}),a.d(e,"VMoney",function(){return s.a}),a.d(e,"options",function(){return r.a}),a.d(e,"VERSION",function(){return l});var l="0.8.1";e.default=i,"undefined"!=typeof window&&window.Vue&&window.Vue.use(i)},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(1),o=a(0),n=a(2);e.default={name:"Money",props:{value:{required:!0,type:[Number,String],default:0},masked:{type:Boolean,default:!1},precision:{type:Number,default:function(){return o.a.precision}},decimal:{type:String,default:function(){return o.a.decimal}},thousands:{type:String,default:function(){return o.a.thousands}},prefix:{type:String,default:function(){return o.a.prefix}},suffix:{type:String,default:function(){return o.a.suffix}}},directives:{money:i.a},data:function(){return{formattedValue:""}},watch:{value:{immediate:!0,handler:function(t,e){var i=a.i(n.a)(t,this.$props);i!==this.formattedValue&&(this.formattedValue=i)}}},methods:{change:function(t){this.$emit("input",this.masked?t.target.value:a.i(n.d)(t.target.value,this.precision))}}}},function(t,e,a){"use strict";e.a=function(t,e){return t=t||{},e=e||{},Object.keys(t).concat(Object.keys(e)).reduce(function(a,i){return a[i]=void 0===e[i]?t[i]:e[i],a},{})}},function(t,e,a){var i=a(7)(a(4),a(8),null,null);t.exports=i.exports},function(t,e){t.exports=function(t,e,a,i){var o,n=t=t||{},s=typeof t.default;"object"!==s&&"function"!==s||(o=t,n=t.default);var r="function"==typeof n?n.options:n;if(e&&(r.render=e.render,r.staticRenderFns=e.staticRenderFns),a&&(r._scopeId=a),i){var l=r.computed||(r.computed={});Object.keys(i).forEach(function(t){var e=i[t];l[t]=function(){return e}})}return{esModule:o,exports:n,options:r}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("input",{directives:[{name:"money",rawName:"v-money",value:{precision:t.precision,decimal:t.decimal,thousands:t.thousands,prefix:t.prefix,suffix:t.suffix},expression:"{precision, decimal, thousands, prefix, suffix}"}],staticClass:"v-money",attrs:{type:"tel"},domProps:{value:t.formattedValue},on:{change:t.change}})},staticRenderFns:[]}},function(t,e,a){t.exports=a(3)}])})},7456:function(t,e,a){},7514:function(t,e,a){"use strict";var i=a("5ca1"),o=a("0a49")(5),n="find",s=!0;n in[]&&Array(1)[n](function(){s=!1}),i(i.P+i.F*s,"Array",{find:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")(n)},"80f2":function(t,e,a){"use strict";a.d(e,"b",function(){return n}),a.d(e,"c",function(){return s}),a.d(e,"a",function(){return r}),a.d(e,"d",function(){return l});var i=a("b775"),o=(a("db49"),"");function n(t){return Object(i["a"])({url:o+"/produtos",method:"get",params:t})}function s(t){return Object(i["a"])({url:o+"/produto",method:"delete",params:{pv:t}})}function r(t){return Object(i["a"])({url:o+"/produto",method:"post",data:t})}function l(t){return Object(i["a"])({url:o+"/produto",method:"patch",data:t})}},8367:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:11}},[a("div",{staticClass:"filter-container",staticStyle:{height:"500px"}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("span",{staticClass:"grid-content bg-red",staticStyle:{"font-family":"tahoma","font-size":"30px"},style:{color:t.msgMain.color},attrs:{justify:"center"}},[t._v("\n            "+t._s(t.msgMain.txt)+"\n          ")]),a("br"),a("br"),t._v(" "),a("el-form-item",{attrs:{label:"Cliente"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.cliente,expression:"cliente"}],ref:"cliente",staticClass:"el-input__inner",staticStyle:{width:"100px",height:"33px"},attrs:{placeholder:"Código"},domProps:{value:t.cliente},on:{input:function(e){e.target.composing||(t.cliente=e.target.value)}}})]),t._v(" "),a("el-form-item",{attrs:{label:""}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.clienteBusca,expression:"clienteBusca"}],ref:"clienteBusca",staticClass:"el-input__inner",staticStyle:{width:"250px",height:"33px"},attrs:{placeholder:"Busca pelo nome ou CPF"},domProps:{value:t.clienteBusca},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getCliente(t.clienteBusca)},input:function(e){e.target.composing||(t.clienteBusca=e.target.value)}}})]),t._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{loading:t.downloadLoading,type:"primary"},on:{click:function(e){return t.getCliente(t.cliente)}}},[t._v("\n            Buscar\n          ")]),t._v(" "),a("br"),t._v(" "),a("el-form-item",{attrs:{label:"Quantidade"}},[a("el-input-number",{staticStyle:{width:"120px"},attrs:{min:1,max:100},model:{value:t.qnt,callback:function(e){t.qnt=e},expression:"qnt"}})],1),a("br"),t._v(" "),a("el-form-item",{attrs:{label:"Código/Nome"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.listQuery.ean,expression:"listQuery.ean"}],ref:"ean",staticClass:"el-input__inner",staticStyle:{width:"170px",height:"33px"},attrs:{autofocus:""},domProps:{value:t.listQuery.ean},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addList(t.listQuery.ean)},input:function(e){e.target.composing||t.$set(t.listQuery,"ean",e.target.value)}}})]),t._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{loading:t.downloadLoading,type:"primary",icon:"el-icon-download"},on:{click:function(e){return t.addList(t.listQuery.ean)}}},[t._v("\n              Incluir\n            ")]),t._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{loading:t.downloadLoading,type:"primary",icon:"el-icon-download"},on:{click:function(e){return t.searchProductByDesc(t.listQuery.ean)}}},[t._v("\n              Procurar\n            ")]),t._v(" "),a("el-form-item",{attrs:{label:"Diversos"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.diversos.txt,expression:"diversos.txt"}],ref:"diversos.txt",staticClass:"el-input__inner",staticStyle:{width:"100px",height:"33px"},attrs:{placeholder:"Diversos"},domProps:{value:t.diversos.txt},on:{input:function(e){e.target.composing||t.$set(t.diversos,"txt",e.target.value)}}}),t._v(" "),a("money",t._b({ref:"diversos.valor",staticClass:"el-input__inner",staticStyle:{width:"100px",height:"33px"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addDiversos()}},model:{value:t.diversos.valor,callback:function(e){t.$set(t.diversos,"valor",e)},expression:"diversos.valor"}},"money",t.money,!1))],1),t._v(" "),a("el-form-item",[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{loading:t.downloadLoading,type:"primary",icon:"el-icon-download"},on:{click:function(e){return t.addDiversos()}}},[t._v("\n              Incluir\n            ")])],1),t._v(" "),a("br"),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.itemAdd_descricao,expression:"itemAdd_descricao"}],staticStyle:{"font-size":"40px"}},[t._v(t._s(t.itemAdd_descricao))]),a("br"),a("br"),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.itemAdd_descricao,expression:"itemAdd_descricao"}],staticStyle:{"font-size":"17px"}},[t._v("Preço unitário:")]),a("br"),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.itemAdd_descricao,expression:"itemAdd_descricao"}],staticStyle:{"font-size":"24px"}},[t._v(t._s(t._f("money")(t.itemAdd_pco_venda)))]),a("br"),t._v(" "),a("br")],1)],1),t._v(" "),a("div",{staticStyle:{"font-family":"tahoma"},attrs:{justify:"center"}},[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{loading:t.downloadLoading,type:"primary"},on:{click:function(e){return t.productEdit()}}},[t._v("\n          Editar\n        ")]),a("br"),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.totalGeral>0,expression:"totalGeral>0"}],staticStyle:{height:"60px","font-size":"25px"},attrs:{type:"warning",icon:"el-icon-close"}},[t._v("Cancelar")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.totalGeral>0,expression:"totalGeral>0"}],staticStyle:{height:"60px","font-size":"25px"},attrs:{type:"primary",icon:"el-icon-check"},on:{click:function(e){return t.vendaClose()}}},[t._v("\n          Finalizar venda\n        ")]),t._v(" "),a("el-button",{staticStyle:{height:"60px","font-size":"25px"},attrs:{type:"primary",icon:"el-icon-check"},on:{click:function(e){return t.handleCaixaPosicao()}}},[t._v("\n          Fechar caixa\n        ")]),t._v(" "),a("el-button",{staticStyle:{height:"60px","font-size":"25px"},attrs:{type:"primary",icon:"el-icon-check"},on:{click:function(e){return t.dataUpdate()}}},[t._v("\n          Atualizar banco de dados\n        ")])],1)]),t._v(" "),a("el-col",{attrs:{span:13}},[a("el-row",{staticClass:"row-bg",staticStyle:{"background-color":"#112940"},attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-red",staticStyle:{"font-family":"tahoma","font-size":"22px",padding:"16px",color:"white","text-align":"center"}},[t._v("\n            Cupom\n          ")])])],1),t._v(" "),a("table",{staticClass:"tableBodyScroll",staticStyle:{"background-color":"#FFDCA3"},attrs:{border:"0",cellpadding:"5",cellspacing:"3"}},[a("thead",[a("tr",{staticStyle:{"font-size":"16px"}},[a("th",[a("div",{staticStyle:{width:"30px"}},[t._v("#")])]),t._v(" "),a("th",[a("div",{staticStyle:{width:"239px"}},[t._v("Produto")])]),t._v(" "),a("th",[a("div",{staticStyle:{width:"40px"}},[t._v("Uni")])]),t._v(" "),a("th",[a("div",{staticStyle:{width:"50px"}},[t._v("N")])]),t._v(" "),a("th",[a("div",{staticStyle:{width:"55px"}},[t._v("$")])]),t._v(" "),a("th",[a("div",{staticStyle:{width:"65px"}},[t._v("Total")])]),t._v(" "),a("th",[a("div",{staticStyle:{width:"55px"}})])])]),t._v(" "),a("tbody",{attrs:{id:"container"}},t._l(t.list,function(e,i){return a("tr",{staticStyle:{color:"#403729"},attrs:{id:"tr"}},[a("td",{attrs:{id:"td",scope:"row"}},[a("div",{staticStyle:{width:"30px"}},[t._v(t._s(i+1))])]),t._v(" "),a("td",{attrs:{id:"td",scope:"row"}},[a("div",{staticStyle:{width:"239px"}},[t._v(t._s(e.ean)),a("br"),t._v(t._s(e.descricao))])]),t._v(" "),a("td",{attrs:{id:"td",scope:"row"}},[a("div",{staticStyle:{width:"40px"}},[t._v(t._s(e.unidade))])]),t._v(" "),a("td",{attrs:{id:"td",scope:"row"}},[a("div",{staticStyle:{width:"50px"}},[t._v(t._s(e.qnt))])]),t._v(" "),a("td",{attrs:{id:"td",scope:"row"}},[a("div",{staticStyle:{width:"55px"}},[t._v(t._s(t._f("money2")(e.pco_venda)))])]),t._v(" "),a("td",{attrs:{id:"td",scope:"row"}},[a("div",{staticStyle:{width:"65px"}},[t._v(t._s(t._f("money2")(e.subtotal)))])]),t._v(" "),a("td",{attrs:{id:"td",scope:"row"}},[a("div",{staticStyle:{width:"55px"}},[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{size:"small",type:"danger",icon:"el-icon-remove-outline"},on:{click:function(a){return t.handleDelete(e)}}})],1)])])}),0)]),t._v(" "),a("el-row",{staticClass:"row-bg",staticStyle:{"background-color":"#112940"},attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-red",staticStyle:{"font-family":"tahoma","font-size":"30px",padding:"16px",color:"white","text-align":"right"},attrs:{justify:"right"}},[t._v("\n            "+t._s(this.totalItens)+" Iten(s)  Total: "+t._s(t._f("money")(this.totalGeral))+"\n          ")])])],1)],1)],1),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogFormVisible,title:t.textMap[t.dialogStatus],top:"5vh"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"dataForm",staticStyle:{width:"400px","margin-left":"50px"},attrs:{rules:t.rules,model:t.temp,"label-position":"left","label-width":"100px"}},[a("el-form-item",{attrs:{label:"Código",prop:"ean"}},[a("el-input",{model:{value:t.temp.ean,callback:function(e){t.$set(t.temp,"ean",e)},expression:"temp.ean"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"Descrição",prop:"descricao"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.temp.descricao,expression:"temp.descricao"}],ref:"form_descricao",staticClass:"el-input__inner",domProps:{value:t.temp.descricao},on:{input:function(e){e.target.composing||t.$set(t.temp,"descricao",e.target.value)}}})]),t._v(" "),a("el-form-item",{attrs:{label:"Preço custo",prop:"preco_custo"}},[a("money",t._b({staticClass:"el-input__inner",model:{value:t.temp.pco_custo,callback:function(e){t.$set(t.temp,"pco_custo",e)},expression:"temp.pco_custo"}},"money",t.money,!1))],1),t._v(" "),a("el-form-item",{attrs:{label:"Preço",prop:"preco_venda"}},[a("money",t._b({ref:"tempPco_venda",staticClass:"el-input__inner",model:{value:t.temp.pco_venda,callback:function(e){t.$set(t.temp,"pco_venda",e)},expression:"temp.pco_venda"}},"money",t.money,!1))],1),t._v(" "),a("el-form-item",{attrs:{label:"Unidade",prop:"unidade"}},[a("el-input",{model:{value:t.temp.unidade,callback:function(e){t.$set(t.temp,"unidade",e)},expression:"temp.unidade"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"Estoque",prop:"estoque"}},[a("el-input",{model:{value:t.temp.estoque,callback:function(e){t.$set(t.temp,"estoque",e)},expression:"temp.estoque"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("\n        Cancela\n      ")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){"create"===t.dialogStatus?t.createData():t.updateData()}}},[t._v("\n        Confirma\n      ")])],1)],1),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogCaixaStatus,title:"Posição de caixa",top:"5vh"},on:{"update:visible":function(e){t.dialogCaixaStatus=e}}},[a("el-form",{ref:"dataForm",staticStyle:{width:"400px","margin-left":"50px"},attrs:{rules:t.rules,model:t.temp,"label-position":"left","label-width":"100px"}},[a("el-form-item",{attrs:{label:"Data",prop:"data"}},[a("el-input",{model:{value:t.caixaStatus.data,callback:function(e){t.$set(t.caixaStatus,"data",e)},expression:"caixaStatus.data"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"Usuário",prop:"usuario"}},[a("el-input",{model:{value:t.caixaStatus.usuario,callback:function(e){t.$set(t.caixaStatus,"usuario",e)},expression:"caixaStatus.usuario"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"Operação",prop:"operacao"}},[a("el-input",{model:{value:t.caixaStatus.operacao,callback:function(e){t.$set(t.caixaStatus,"operacao",e)},expression:"caixaStatus.operacao"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"Valor",prop:"valor"}},[a("money",t._b({staticClass:"el-input__inner",model:{value:t.caixaStatus.valor,callback:function(e){t.$set(t.caixaStatus,"valor",e)},expression:"caixaStatus.valor"}},"money",t.money,!1))],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogCaixaStatus=!1}}},[t._v("\n        Cancela\n      ")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.setCaixaPosicao()}}},[t._v("\n        Confirma\n      ")])],1)],1),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogFormQntVisible,title:t.textMap[t.dialogStatus],top:"5vh"},on:{"update:visible":function(e){t.dialogFormQntVisible=e}}},[a("el-form",{ref:"dataForm",staticStyle:{width:"400px","margin-left":"50px"},attrs:{rules:t.rules,model:t.temp,"label-position":"left","label-width":"140px"}},[a("el-form-item",{attrs:{label:"Código",prop:"ean"}},[t._v("\n        "+t._s(t.temp2.ean)+"\n      ")]),t._v(" "),a("el-form-item",{attrs:{label:"Descrição",prop:"descricao"}},[t._v("\n        "+t._s(t.temp2.descricao)+"\n      ")]),t._v(" "),a("el-form-item",{attrs:{label:"Preço",prop:"preco"}},[t._v("\n        "+t._s(t._f("money")(t.temp2.pco_venda))+"\n      ")]),t._v(" "),a("el-form-item",{attrs:{label:"Unidade",prop:"unidade"}},[t._v("\n        "+t._s(t.temp2.unidade)+"\n      ")]),t._v(" "),a("el-form-item",{attrs:{label:"Quantidade",prop:"qnt"}},[a("el-input-number",{attrs:{min:1,max:10},on:{change:function(e){t.temp2.subtotal=t.temp2.qnt*t.temp2.pco_venda}},model:{value:t.temp2.qnt,callback:function(e){t.$set(t.temp2,"qnt",e)},expression:"temp2.qnt"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"subtotal",prop:"total"}},[t._v("\n        "+t._s(t._f("money")(t.temp2.subtotal))+"\n      ")])],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormQntVisible=!1}}},[t._v("Cancela")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.updateData()}}},[t._v("Confirma")])],1)],1),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogFormProductUpdateVisible,title:t.textMap[t.dialogStatus],top:"5vh"},on:{"update:visible":function(e){t.dialogFormProductUpdateVisible=e}}},[a("el-form",{ref:"dataFormProductEdit",staticStyle:{width:"400px","margin-left":"50px"},attrs:{rules:t.rules,model:t.temp2,"label-position":"left","label-width":"140px"}},[a("el-form-item",{attrs:{label:"Código",prop:"ean"}},[t._v("\n        "+t._s(t.temp2.ean)+"\n      ")]),t._v(" "),a("el-form-item",{attrs:{label:"Descrição",prop:"descricao"}},[a("el-input",{ref:"form_descricao2",model:{value:t.temp2.descricao,callback:function(e){t.$set(t.temp2,"descricao",e)},expression:"temp2.descricao"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"Preço custo",prop:"preco_custo"}},[a("money",t._b({staticClass:"el-input__inner",model:{value:t.temp2.pco_custo,callback:function(e){t.$set(t.temp2,"pco_custo",e)},expression:"temp2.pco_custo"}},"money",t.money,!1))],1),t._v(" "),a("el-form-item",{attrs:{label:"Preço",prop:"preco_venda"}},[a("money",t._b({staticClass:"el-input__inner",model:{value:t.temp2.pco_venda,callback:function(e){t.$set(t.temp2,"pco_venda",e)},expression:"temp2.pco_venda"}},"money",t.money,!1))],1),t._v(" "),a("el-form-item",{attrs:{label:"Unidade",prop:"unidade"}},[a("el-input",{model:{value:t.temp2.unidade,callback:function(e){t.$set(t.temp2,"unidade",e)},expression:"temp2.unidade"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"Estoque",prop:"estoque"}},[a("el-input",{model:{value:t.temp2.estoque,callback:function(e){t.$set(t.temp2,"estoque",e)},expression:"temp2.estoque"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormProductUpdateVisible=!1}}},[t._v("Cancela")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.updateProductEdit()}}},[t._v("Confirma")])],1)],1),t._v(" "),a("el-dialog",{attrs:{visible:t.vendaCloseFlg,title:"Fechamento de venda",width:"60%",center:"",top:"5vh"},on:{"update:visible":function(e){t.vendaCloseFlg=e}}},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"170px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple-dark"},[t._v("Venda")])])],1),t._v(" "),a("el-form-item",{attrs:{label:"Total"}},[t._v("\n            "+t._s(t._f("money")(t.totalGeral))+"\n          ")]),t._v(" "),a("el-form-item",{attrs:{label:"Desconto"}},[a("money",t._b({staticClass:"el-input__inner",model:{value:t.desconto,callback:function(e){t.desconto=e},expression:"desconto"}},"money",t.money,!1))],1),t._v(" "),a("el-form-item",{attrs:{label:"Total a pagar"}},[t._v("\n            "+t._s(t._f("money")(t.total_a_pagar))+"\n          ")])],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content bg-purple-dark"},[t._v("Pagamento")])])],1),t._v(" "),a("el-form-item",{attrs:{label:"Dinheiro"}},[a("money",t._b({staticClass:"el-input__inner",model:{value:t.pago_dinheiro,callback:function(e){t.pago_dinheiro=e},expression:"pago_dinheiro"}},"money",t.money,!1))],1),t._v(" "),a("el-form-item",{attrs:{label:"Cartão de débito"}},[a("money",t._b({staticClass:"el-input__inner",model:{value:t.pago_debito,callback:function(e){t.pago_debito=e},expression:"pago_debito"}},"money",t.money,!1))],1),t._v(" "),a("el-form-item",{attrs:{label:"Cartão de crédito"}},[a("money",t._b({staticClass:"el-input__inner",model:{value:t.pago_credito,callback:function(e){t.pago_credito=e},expression:"pago_credito"}},"money",t.money,!1))],1),t._v(" "),a("el-form-item",{attrs:{label:"Valor pago"}},[a("money",t._b({staticClass:"el-input__inner",model:{value:t.valor_pago,callback:function(e){t.valor_pago=e},expression:"valor_pago"}},"money",t.money,!1))],1),t._v(" "),a("el-form-item",{attrs:{label:"Troco"}},[t.pago_troco>0?a("money",t._b({staticClass:"el-input__inner",model:{value:t.pago_troco,callback:function(e){t.pago_troco=e},expression:"pago_troco"}},"money",t.money,!1)):t._e()],1)],1)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t.pago_troco>=0?a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.vendaCloseOk(),t.dialogPvVisible=!1}}},[t._v("Confirma")]):t._e()],1)],1),t._v(" "),a("el-dialog",{attrs:{visible:t.vendaCloseOkVisible,title:"Venda registrada",width:"30%"},on:{"update:visible":function(e){t.vendaCloseOkVisible=e}}},[a("span",[t._v("Venda registrada com sucesso!")]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.vendaCloseOkEnd}},[t._v("Ok")])],1)]),t._v(" "),a("el-dialog",{attrs:{visible:t.produtosListFlg,title:"Busca de produto",width:"70%"},on:{"update:visible":function(e){t.produtosListFlg=e}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.produtosList,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"Descricao",prop:"descricao",sortable:"custom",align:"center",width:"350"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("capitalize")(e.row.descricao)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"unidade",prop:"unidade",sortable:"custom",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.unidade))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"Preço",prop:"pco_venda",sortable:"custom",align:"center",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("money")(e.row.pco_venda)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"Ações",align:"center",width:"100","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(e){return t.addList(i.ean)}}},[t._v("\n            Incluir\n          ")])]}}])})],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.produtosListFlg=!1}}},[t._v("Fechar")])],1)],1),t._v(" "),a("el-dialog",{attrs:{visible:t.clientesListFlg,title:"Busca cliente",width:"70%",align:"center"},on:{"update:visible":function(e){t.clientesListFlg=e}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.clientesList,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"Código",prop:"id",sortable:"custom",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.id))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"Nome",prop:"nome",sortable:"custom",align:"center",width:"385"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("capitalize")(e.row.nome)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"Documento",prop:"doc",sortable:"custom",align:"center",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.doc))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"Ações",align:"center",width:"170","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("el-button",{attrs:{size:"default",type:"success"},on:{click:function(e){return t.clienteSet(i.id)}}},[t._v("\n            Selecionar\n          ")])]}}])})],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer",align:"center"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.clientesListFlg=!1}}},[t._v("Fechar")])],1)],1)],1)},o=[],n=(a("96cf"),a("7514"),a("ac4d"),a("8a81"),a("c5f6"),a("ac6a"),a("7f7f"),a("a481"),a("6b54"),a("3b8d"),a("80f2")),s=a("6724"),r=a("ed08"),l=a("333d"),c=a("bc3a"),d=a.n(c),u=a("716b");a("db49");var p={name:"Balcao",components:{Pagination:l["a"],Money:u["Money"]},directives:{waves:s["a"]},filters:{money:function(t){return t=parseFloat(t).toFixed(2),t?(t=t.toString(),-1==t.indexOf(".")&&(t+=",00"),"R$ "+t.replace(".",",")):""},money2:function(t){return t=parseFloat(t).toFixed(2),t?(t=t.toString(),-1==t.indexOf(".")&&(t+=",00"),t.replace(".",",")):""},capitalize:function(t){return t?(t=t.toString(),t.charAt(0).toUpperCase()+t.slice(1)):""},statusFilter:function(t){var e={published:"success",draft:"info",deleted:"danger"};return e[t]},typeFilter:function(t){return calendarTypeKeyValue[t]}},data:function(){return{dialogCaixaStatus:!1,caixaStatus:{data:(new Date).toLocaleString("pt-BR"),usuario:this.$store.getters.name,operacao:"abertura",valor:0},server:"/prod-api",msgMain:{txt:"Caixa livre",color:"green"},subtotal:0,diversos:{txt:"",valor:0},produtos:[],cliente:"",clienteBusca:"",clientesList:[],list2:[],dialogFormProductUpdateVisible:!1,itemAdd_qnt:"",itemAdd_descricao:"",itemAdd_pco_venda:"",itemAdd_subTotal:"",itemN:0,itemAdd_ean:"",vendaItemId:0,totalItens:0,money:{decimal:",",thousands:".",prefix:"R$ ",precision:2,masked:!1},form:{},lastEan:null,valor_pago:0,pago_troco:0,pago_dinheiro:0,pago_debito:0,pago_credito:0,total_a_pagar:0,desconto:0,acrescimo:0,pago_falta:0,vendaID:Math.random().toString(36).substring(2,9)+Math.random().toString(36).substring(2,6),vendaItem:0,produtosListFlg:!1,vendaCloseFlg:!1,clientesListFlg:!1,dialogFormQntVisible:!1,dialogFormVisible:!1,produtosListVisible:!1,vendaCloseOkVisible:!1,tableKey:0,list:[],vendasStack:[],produtosList:[],total:0,totalGeral:0,listLoading:!0,qnt:1,listQuery:{page:1,limit:20,importance:void 0,title:void 0,type:void 0,sort:"+id"},importanceOptions:[1,2,3],sortOptions:[{label:"ID Ascending",key:"+id"},{label:"ID Descending",key:"-id"}],statusOptions:["published","draft","deleted"],showReviewer:!1,temp:{id:0,ean:""},temp2:{id:0},dialogStatus:"",textMap:{update:"Editar",create:"Incluir"},dialogPvVisible:!1,pvData:[],rules:{type:[{required:!0,message:"type is required",trigger:"change"}],timestamp:[{type:"date",required:!0,message:"timestamp is required",trigger:"change"}],title:[{required:!0,message:"title is required",trigger:"blur"}]},downloadLoading:!1}},watch:{desconto:function(){this.total_a_pagar=this.totalGeral-this.desconto+parseFloat(this.acrescimo),this.valor_pago=parseFloat(this.pago_dinheiro)+parseFloat(this.pago_debito)+parseFloat(this.pago_credito),this.pago_troco=this.valor_pago-this.total_a_pagar},acrescimo:function(){this.total_a_pagar=this.totalGeral-this.desconto+parseFloat(this.acrescimo),this.valor_pago=parseFloat(this.pago_dinheiro)+parseFloat(this.pago_debito)+parseFloat(this.pago_credito),this.pago_troco=this.valor_pago-this.total_a_pagar},pago_dinheiro:function(){this.total_a_pagar=this.totalGeral-this.desconto+parseFloat(this.acrescimo),this.valor_pago=parseFloat(this.pago_dinheiro)+parseFloat(this.pago_debito)+parseFloat(this.pago_credito),this.pago_troco=this.valor_pago-this.total_a_pagar,this.pago_falta=this.total_a_pagar-this.pago_falta},pago_debito:function(){this.total_a_pagar=this.totalGeral-this.desconto+parseFloat(this.acrescimo),this.valor_pago=parseFloat(this.pago_dinheiro)+parseFloat(this.pago_debito)+parseFloat(this.pago_credito),this.pago_troco=this.valor_pago-this.total_a_pagar},pago_credito:function(){this.total_a_pagar=this.totalGeral-this.desconto+parseFloat(this.acrescimo),this.valor_pago=parseFloat(this.pago_dinheiro)+parseFloat(this.pago_debito)+parseFloat(this.pago_credito),this.pago_troco=this.valor_pago-this.total_a_pagar}},created:function(){var t=this;if(this.dialogCaixaStatus=!0,localStorage.getItem("produtos"))try{this.produtos=JSON.parse(localStorage.getItem("produtos"))}catch(e){localStorage.removeItem("produtos")}else Object(n["b"])().then(function(e){t.produtos=e.data.items,console.log("this.produtos:",t.produtos);var a=JSON.stringify(t.produtos);localStorage.setItem("produtos",a)})},methods:{dataUpdate:function(){var t=this;Object(n["b"])().then(function(e){t.produtos=e.data.items,console.log("this.produtos:",t.produtos);var a=JSON.stringify(t.produtos);localStorage.setItem("produtos",a)})},handleCaixaPosicao:function(){this.dialogCaixaStatus=!0,this.caixaStatus.operacao="Fechamento"},setCaixaPosicao:function(){var t={data:(new Date).toLocaleString("pt-BR"),usuario:this.$store.getters.name,operacao:this.caixaStatus.operacao,valor:this.caixaStatus.valor};console.log(t),this.dialogCaixaStatus=!1,d.a.post(this.server+"/setCaixaPosicao",t,{withCredentials:!0}).then(function(t){console.log("ok:",t)}).catch(function(t){alert("erro")})},getCaixaPosicao:function(){return d.a.get(this.server+"/getCaixaPosicao?usuario="+this.$store.getters.name,{withCredentials:!0}).then(function(t){console.log("response:",t)})},roles:function(){console.log(">>>",this.$store.getters.roles[0])},eansearch:function(){var t=this;return d.a.get(t.server+"/eansearch?ean="+t.temp.ean,{withCredentials:!0})},vendasStackUpload:function(){var t=this;if(console.log("this.vendasStack:",this.vendasStack),this.vendasStack.length>0)for(var e=0;e<this.vendasStack.length;e++)d.a.post(t.server+"/vendaClose",this.vendasStack[e],{withCredentials:!0}).then(function(t){console.log("ok:",t)}).catch(function(t){alert("erro")});this.$notify({title:"Sucesso",message:"Vendas enviado com sucesso",type:"success",duration:2e3}),d.a.post(t.server+"/productsList",this.produtos,{withCredentials:!0}).then(function(t){console.log("ok:",t)}).catch(function(t){alert("erro")}),this.$notify({title:"Sucesso",message:"Produtos enviado com sucesso",type:"success",duration:2e3})},productEdit:function(){var t={id:this.lastId,ean:this.lastEan,descricao:this.lastDescricao,unidade:this.lastUnidade,pco_venda:this.lastPco_venda,estoque:this.lastEstoque};this.handleProductUpdate(t)},indexMethod:function(t){return 2*t},getSummaries:function(t){var e=t.columns,a=t.data,i=[];return e.forEach(function(t,e){if(0!==e)if(1!==e)if(2!==e)if(3!==e)if(4!==e)if(6!==e){var o=a.map(function(e){return Number(e[t.property])});o.every(function(t){return isNaN(t)})?i[e]="N/A":i[e]="R$ "+o.reduce(function(t,e){var a=Number(e);return isNaN(a)?t:t+e},0)}else i[e]="";else i[e]="Total:";else i[e]="";else i[e]="";else i[e]="";else i[e]=""}),i},produtoIncluir:function(t){this.addList(t),this.produtosListFlg=!1},clienteSet:function(t){console.log("cliente id:",t),this.cliente=t,this.clientesListFlg=!1,this.msgMain={txt:"Venda em curso",color:"#886A08"},this.$refs.ean.focus()},vendaClose:function(){this.totalGeral=0;var t=!0,e=!1,a=void 0;try{for(var i,o=this.list[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var n=i.value;this.totalGeral+=n.subtotal}}catch(s){e=!0,a=s}finally{try{t||null==o.return||o.return()}finally{if(e)throw a}}this.total_a_pagar=this.totalGeral,this.desconto=0,this.acrescimo=0,this.pago_dinheiro=0,this.pago_credito=0,this.totalpago=0,this.pago_troco=0-this.total_a_pagar,this.vendaCloseFlg=!0},vendaCloseOk:function(){var t=this;this.totalpago=this.pago_dinheiro+this.pago_debito+this.pago_credito;var e={vendaID:this.vendaID,cliente:this.cliente,subtotal:this.totalGeral,desconto:this.desconto,acrescimo:this.acrescimo,total:this.total,dinheiro:this.pago_dinheiro,debito:this.pago_debito,credito:this.pago_credito,totalpago:this.totalpago,troco:this.pago_troco,itens:this.list},a=JSON.stringify(e);console.log(a);var i={json_data:a};d.a.post(t.server+"/vendaClose",i,{withCredentials:!0}).then(function(t){console.log("ok:",t)}).catch(function(e){t.vendasStack.push(i),console.log("error:",e)}),this.vendaID=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),this.total_a_pagar=0,this.totalGeral=0,this.desconto=0,this.acrescimo=0,this.pago_dinheiro=0,this.pago_debito=0,this.pago_credito=0,this.pago_troco=0-this.total_a_pagar,this.list=[],this.listQuery.ean="",this.listQuery.descricao="",this.itemAdd_descricao="",this.itemAdd_pco_venda=0,this.vendaCloseFlg=!1,this.vendaCloseOkVisible=!0,this.vendaItem=0},vendaCloseOkEnd:function(){this.totalItens=0,this.msgMain={txt:"Caixa Livre",color:"green"},this.listQuery.descricao="",this.$refs.ean.focus(),this.vendaCloseOkVisible=!1},scrollToEnd:function(){var t=this.$el.querySelector("#container");t.scrollTop=t.scrollHeight},addDiversos:function(){var t=this;this.msgMain={txt:"Venda em curso",color:"#886A08"},this.vendaItemId++;var e=this.diversos.txt||"Diversos";console.log(e),this.subtotal=parseFloat(this.qnt)*parseFloat(this.diversos.valor),this.list.push({id:this.vendaItemId,vendaID:this.vendaID,ean:"00001",descricao:e,pco_venda:this.diversos.valor,unidade:"uni",qnt:this.qnt,subtotal:this.subtotal}),this.total=1,this.itemAdd_ean="00001",this.itemAdd_descricao=e,this.itemAdd_unidade="Uni",this.itemAdd_pco_venda=this.diversos.valor,this.itemAdd_subTotal=this.subtotal,this.totalItens=0;for(var a=0;a<this.list.length;a++)this.totalItens+=this.list[a].qnt;this.totalGeral+=parseFloat(this.qnt)*parseFloat(this.diversos.valor),setTimeout(function(){t.scrollToEnd()},200),setTimeout(function(){t.listLoading=!1},1500),this.listQuery.ean="",this.qnt=1,this.diversos.txt="",this.diversos.valor=0,this.$refs.ean.focus()},addList:function(t){var e=this;if(t.length>0){console.log("ean:",t),this.lastEan=t,this.msgMain={txt:"Venda em curso",color:"#886A08"},this.produtosListFlg=!1,this.listLoading=!0;var a=this.produtos.find(function(e){return e.ean===t});if(console.log("item:",a),a){this.vendaItemId++;var i=parseFloat(this.qnt)*parseFloat(a.pco_venda);this.itemN++,this.list.push({id:this.vendaItemId,itemN:this.itemN,vendaID:this.vendaID,ean:a.ean,descricao:a.descricao,pco_venda:a.pco_venda,unidade:a.unidade,qnt:this.qnt,subtotal:i}),this.total=1,this.lastId=a.id,this.lastEan=a.ean,this.lastDescricao=a.descricao,this.lastUnidade=a.unidade,this.lastPco_venda=a.pco_venda,this.itemAdd_ean=a.ean,this.itemAdd_qnt=a.qnt,this.itemAdd_descricao=a.descricao,this.itemAdd_unidade=a.unidade,this.itemAdd_pco_venda=a.pco_venda,this.itemAdd_subTotal=i,this.totalItens=0;for(var o=0;o<this.list.length;o++)this.totalItens+=this.list[o].qnt;this.totalGeral+=parseFloat(this.qnt)*parseFloat(a.pco_venda),setTimeout(function(){e.scrollToEnd()},200),setTimeout(function(){e.listLoading=!1},1500),this.listQuery.ean="",this.qnt=1,this.$refs.ean.focus()}else this.handleProductCreate(t)}},searchProductByDesc:function(t){var e=this,a=t.trim();console.log("|"+a+"|"),a.length>2?(this.produtosListFlg=!0,this.listLoading=!0,Object(n["b"])({descricao:a}).then(function(t){console.log("response.data.items:",t.data.items),e.produtosList=t.data.items,e.total2=t.data.total,setTimeout(function(){e.listLoading=!1},1500)})):this.$notify({title:"Procurar",message:"Digite mais de 2 dígitos",type:"warning",duration:2e3}),this.listQuery.ean="",this.listQuery.descricao=""},getCliente:function(t){var e=this;e.clientesList=[],console.log("|"+this.clienteBusca+"|"),this.clienteBusca.length>2?(this.clientesListFlg=!0,this.listLoading=!0,d.a.get(e.server+"/clientes?nome="+this.clienteBusca,{withCredentials:!0}).then(function(t){var a=this;console.log("response:",t.data.data.items),e.clientesList=t.data.data.items,console.log("clientesList:",e.clientesList),this.total2=t.data.total,setTimeout(function(){a.listLoading=!1},1500)}).catch(function(t){console.log(t)}).finally(function(){})):this.$notify({title:"Procurar",message:"Digite mais de 2 dígitos",type:"warning",duration:2e3}),this.listQuery.ean="",this.listQuery.descricao=""},handleFilter:function(){this.listQuery.page=1,this.getList()},handleModifyStatus:function(t,e){this.$message({message:"Success",type:"success"}),t.status=e},sortChange:function(t){var e=t.prop,a=t.order;"id"===e&&this.sortByID(a)},sortByID:function(t){this.listQuery.sort="ascending"===t?"+id":"-id",this.handleFilter()},resetTemp:function(){this.temp={id:this.temp.id,importance:1,remark:"",timestamp:new Date,title:"",status:"published",type:""}},handleProductCreate:function(t){var e=this;this.resetTemp(),null!=t&&(this.temp.ean=t),this.eansearch(t).then(function(a){console.log("result:",a.data),e.temp.descricao=a.data,e.temp.id++,e.temp.ean=t,e.temp.qnt=e.qnt,e.temp.unidade="uni",e.temp.estoque=10,e.dialogStatus="create",e.dialogFormVisible=!0,e.$nextTick(function(){e.$refs["dataForm"].clearValidate(),e.$refs.form_descricao.focus()}),e.listQuery.ean="",e.qnt=1})},createData:function(){var t=this,e=this;this.$refs["dataForm"].validate(function(a){if(a){t.vendaItemId++;var i={id:t.vendaItemId,ean:t.temp.ean,descricao:t.temp.descricao,pco_venda:t.temp.pco_venda,unidade:t.temp.unidade,qnt:t.qnt,subtotal:parseFloat(t.qnt)*parseFloat(t.temp.pco_venda)};console.log(i),t.produtos.push(i),localStorage.removeItem("produtos"),localStorage.setItem("produtos",JSON.stringify(t.produtos)),t.$refs.ean.focus(),t.total=t.produtos.length,t.totalGeral+=parseFloat(t.qnt)*parseFloat(t.temp.pco_venda),t.totalItens=0;for(var o=0;o<t.list.length;o++)t.totalItens+=t.list[o].qnt;console.log("this.totalItens:",t.totalItens),t.itemAdd_ean=t.temp.ean,t.itemAdd_descricao=t.temp.descricao,t.itemAdd_pco_venda=t.temp.pco_venda,t.addList(t.temp.ean),t.listQuery.ean="",t.dialogFormVisible=!1,Object(n["a"])(t.temp).then(function(){t.$notify({title:"Sucesso",message:"Produto cadastrado com sucesso",type:"success",duration:2e3})},function(t){e.$notify({title:"erro",message:t,type:"error",duration:2e3})})}})},handleProductUpdate:function(t){var e=this;console.log(t),this.temp2=Object.assign({},t),this.temp2.timestamp=new Date(this.temp2.timestamp),this.dialogStatus="update",this.dialogFormProductUpdateVisible=!0,this.$nextTick(function(){e.$refs["dataFormProductEdit"].clearValidate()})},handleUpdate:function(t){var e=this;alert(t),console.log(t),this.temp2=Object.assign({},t),this.temp2.timestamp=new Date(this.temp2.timestamp),this.dialogStatus="update",this.dialogFormQntVisible=!0,this.$nextTick(function(){e.$refs["dataForm"].clearValidate()})},updateData:function(){var t=this;this.$refs["dataForm"].validate(function(e){if(e){Object.assign({},t.temp2);var a=!0,i=!1,o=void 0;try{for(var n,s=t.list[Symbol.iterator]();!(a=(n=s.next()).done);a=!0){var r=n.value;if(console.log("this.temp2.id:",t.temp2.id),r.id===t.temp2.id){var l=t.list.indexOf(r);t.list.splice(l,1,t.temp2);break}}}catch(h){i=!0,o=h}finally{try{a||null==s.return||s.return()}finally{if(i)throw o}}t.dialogFormVisible=!1,t.$notify({title:"Sucesso",message:"Registro alterado",type:"success",duration:2e3}),t.totalItens=0;for(var c=0;c<t.list.length;c++)t.totalItens+=t.list[c].qnt;t.totalGeral=0;var d=!0,u=!1,p=void 0;try{for(var m,f=t.list[Symbol.iterator]();!(d=(m=f.next()).done);d=!0){var v=m.value;t.totalGeral+=v.subtotal}}catch(h){u=!0,p=h}finally{try{d||null==f.return||f.return()}finally{if(u)throw p}}t.dialogFormQntVisible=!1}})},updateProductEdit:function(){var t=this;this.$refs["dataFormProductEdit"].validate(function(e){if(e){var a=Object.assign({},t.temp2);Object(n["d"])(a).then(function(){var e=!0,a=!1,i=void 0;try{for(var o,n=t.list[Symbol.iterator]();!(e=(o=n.next()).done);e=!0){var s=o.value;if(console.log("this.temp2.id:",t.temp2.id),s.id===t.temp2.id){var r=t.list.indexOf(s);t.list.splice(r,1,t.temp2);break}}}catch(l){a=!0,i=l}finally{try{e||null==n.return||n.return()}finally{if(a)throw i}}t.dialogFormProductUpdateVisible=!1,t.$notify({title:"Sucesso",message:"Registro alterado",type:"success",duration:2e3})})}})},handleDelete:function(t){this.$notify({title:"Sucesso",message:"Registro excluido",type:"success",duration:2e3}),console.log(t),this.totalGeral-=t.subtotal;var e=this.list.indexOf(t);this.list.splice(e,1),this.totalItens=0;for(var a=0;a<this.list.length;a++)this.totalItens+=this.list[a].qnt},handleDownload:function(){var t=this;this.downloadLoading=!0,Promise.all([a.e("chunk-e69e90f4"),a.e("chunk-58293907")]).then(a.bind(null,"4bf8d")).then(function(e){var a=["timestamp","title","type","importance","status"],i=["timestamp","title","type","importance","status"],o=t.formatJson(i,t.list);e.export_json_to_excel({header:a,data:o,filename:"table-list"}),t.downloadLoading=!1})},formatJson:function(t,e){return e.map(function(e){return t.map(function(t){return"timestamp"===t?Object(r["f"])(e[t]):e[t]})})}}},m=p,f=(a("a1fb"),a("2877")),v=Object(f["a"])(m,i,o,!1,null,"8949cd8e",null);e["default"]=v.exports},"8d41":function(t,e,a){},a1fb:function(t,e,a){"use strict";var i=a("6c29"),o=a.n(i);o.a},e498:function(t,e,a){"use strict";var i=a("7456"),o=a.n(i);o.a}}]);